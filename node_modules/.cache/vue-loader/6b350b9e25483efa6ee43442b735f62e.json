{"remainingRequest":"/Users/yousseifissulahi/Desktop/EFREI/Alternance/Test/weather/weather-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yousseifissulahi/Desktop/EFREI/Alternance/Test/weather/weather-app/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yousseifissulahi/Desktop/EFREI/Alternance/Test/weather/weather-app/src/views/Home.vue","mtime":1628855182878},{"path":"/Users/yousseifissulahi/Desktop/EFREI/Alternance/Test/weather/weather-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yousseifissulahi/Desktop/EFREI/Alternance/Test/weather/weather-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGYXYgZnJvbSAiLi4vY29tcG9uZW50cy9GYXZvcmlzIgppbXBvcnQgSGVhZGVyIGZyb20gIi4uL2NvbXBvbmVudHMvSGVhZGVyIgppbXBvcnQgRm9vdGVyIGZyb20gIi4uL2NvbXBvbmVudHMvRm9vdGVyIgppbXBvcnQgTG9hZGluZyBmcm9tICIuLi9jb21wb25lbnRzL0xvYWRpbmciCmltcG9ydCBzdG9yZSBmcm9tICIuLi9zdG9yZSIKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIgppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKCm5ldyBWdWUoeyBlbDogJyNjb21wb25lbnRzLWRlbW8nIH0pCgpleHBvcnQgZGVmYXVsdHsKICBjb21wb25lbnRzOiB7SGVhZGVyLCBGb290ZXIsIExvYWRpbmcsIGZhdn0sCiAgY29tcHV0ZWQ6IHsKICAgIGxvY2F0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLmxvY2F0aW9uCiAgICB9LAogICAgdXNlciAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS51c2VyCiAgICB9LAogICAgYXBpICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLmFwaQogICAgfSwKICAgIHdlYXRoZXIgKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUud2VhdGhlcgogICAgfQogIH0sCiAgbW91bnRlZCgpewogICAgaWYoIXRoaXMubG9jYXRpb24uc2VhcmNoKXsKICAgICAgaWYoIW5hdmlnYXRvci5nZW9sb2NhdGlvbil7CiAgICAgICAgaWYoIXRoaXMubG9jYXRpb24ubG9jYXRpb25LZXkgJiYgIXRoaXMubG9jYXRpb24ubG9jYXRpb25OYW1lKXsKICAgICAgICAgIHRoaXMuZ2V0SXBBZGRyZXNzKHRydWUpOwogICAgICAgIH1lbHNlewogICAgICAgICAgdGhpcy5jaGVja0xvY2F0aW9uKCk7CiAgICAgICAgfQogICAgICB9ZWxzZXsKICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKHRoaXMuc3VjY2VzcywgdGhpcy5lcnJvcikKICAgICAgfQogICAgfWVsc2V7CiAgICAgIHRoaXMubG9jYXRpb24uc2VhcmNoID0gZmFsc2U7CiAgICAgIHRoaXMuY2hlY2tMb2NhdGlvbigpOwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgICByZXR1cm57CiAgICAgIC8vIGZhdiA6IFtdLAogICAgICAvLyB2aWxsZTogdGhpcy5sb2NhdGlvbi5sb2NhdGlvbk5hbWUKICAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmYXZvcmk6IGZ1bmN0aW9uKCkgewoKICAgICAgZmF2ID0gW10sCiAgICAgIHRoaXMuZmF2LnB1c2goJ3lwb3Vzc3NzJyk7CiAgICAgIGNvbnNvbGUubG9nKGZhdikKICAgIH0sCiAgICAvLyBmYXZvcmk6IGZ1bmN0aW9uKHZpbGxlKXsKICAgIC8vICAgdGhpcy5mYXYucHVzaCh2aWxsZSk7CiAgICAvLyAgIGNvbnNvbGUubG9nKGZhdik7CiAgICAvLyB9LAogICAgZ2V0SXBBZGRyZXNzKHBhcmFtID0gZmFsc2UpewogICAgICBheGlvcwogICAgICAgIC5nZXQoImh0dHBzOi8vYXBpLmlwaWZ5Lm9yZz9mb3JtYXQ9anNvbiIpCiAgICAgICAgLnRoZW4oKFJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLnVzZXIuaXBBZGRyZXNzID0gUmVzcG9uc2UuZGF0YS5pcDsKICAgICAgICAgIGlmKHBhcmFtKXt0aGlzLmdldElwTG9jYXRpb24oKX0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7dHlwZTogImVycm9yIiwgdGV4dDogZXJyb3J9KQogICAgICAgIH0pCiAgICB9LAogICAgZ2V0SXBMb2NhdGlvbigpewogICAgICBheGlvcwogICAgICAgIC5nZXQoImh0dHA6Ly9kYXRhc2VydmljZS5hY2N1d2VhdGhlci5jb20vbG9jYXRpb25zL3YxL2NpdGllcy9pcGFkZHJlc3M/YXBpa2V5PSIgKyB0aGlzLmFwaS5hcGlLZXkgKyAiJnE9IiArIHRoaXMudXNlci5pcEFkZHJlc3MgKyAiJmxhbmd1YWdlPSIgKyB0aGlzLmFwaS5sYW5nICsgIiZkZXRhaWxzPWZhbHNlIikKICAgICAgICAudGhlbigoUmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMubG9jYXRpb24ubG9jYXRpb25LZXkgPSBSZXNwb25zZS5kYXRhLlBhcmVudENpdHkuS2V5LAogICAgICAgICAgdGhpcy5sb2NhdGlvbi5sb2NhdGlvbk5hbWUgPSBSZXNwb25zZS5kYXRhLlBhcmVudENpdHkuRW5nbGlzaE5hbWUKICAgICAgICAgIHRoaXMuZ2V0V2VhdGhlckRhdGEoKTsKICAgICAgICAgIHRoaXMuZ2V0NURheVdlYXRoZXJEYXRhKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoe3R5cGU6ICJlcnJvciIsIHRleHQ6IGVycm9yfSkKICAgICAgICB9KQogICAgfSwKICAgIGdldE1lcmlkaWFuTG9jYXRpb24oKXsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KCJodHRwOi8vZGF0YXNlcnZpY2UuYWNjdXdlYXRoZXIuY29tL2xvY2F0aW9ucy92MS9jaXRpZXMvZ2VvcG9zaXRpb24vc2VhcmNoP2FwaWtleT0iICsgdGhpcy5hcGkuYXBpS2V5ICsgIiZxPSIgKyB0aGlzLmxvY2F0aW9uLmxhdGl0dWRlICsgIiwiICsgdGhpcy5sb2NhdGlvbi5sb25naXR1ZGUgKyAiJmxhbmd1YWdlPSIgKyB0aGlzLmFwaS5sYW5nICsgIiZkZXRhaWxzPWZhbHNlJnRvcGxldmVsPWZhbHNlIikKICAgICAgICAudGhlbigoUmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMubG9jYXRpb24ubG9jYXRpb25LZXkgPSBSZXNwb25zZS5kYXRhLktleSwKICAgICAgICAgIHRoaXMubG9jYXRpb24ubG9jYXRpb25OYW1lID0gUmVzcG9uc2UuZGF0YS5Mb2NhbGl6ZWROYW1lCiAgICAgICAgICB0aGlzLmdldFdlYXRoZXJEYXRhKCk7CiAgICAgICAgICB0aGlzLmdldDVEYXlXZWF0aGVyRGF0YSgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5KHt0eXBlOiAiZXJyb3IiLCB0ZXh0OiBlcnJvcn0pCiAgICAgICAgfSkKICAgIH0sCiAgICBnZXRXZWF0aGVyRGF0YSgpewogICAgICBheGlvcwogICAgICAgIC5nZXQoImh0dHBzOi8vZGF0YXNlcnZpY2UuYWNjdXdlYXRoZXIuY29tL2ZvcmVjYXN0cy92MS9ob3VybHkvMWhvdXIvIiArIHRoaXMubG9jYXRpb24ubG9jYXRpb25LZXkgKyAiP2FwaWtleT0iICsgdGhpcy5hcGkuYXBpS2V5ICsgIiZsYW5ndWFnZT0iICsgdGhpcy5hcGkubGFuZyArICImZGV0YWlscz1mYWxzZSZtZXRyaWM9dHJ1ZSIpCiAgICAgICAgLnRoZW4oKFJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLndlYXRoZXIuaG91ckRhdGEgPSBSZXNwb25zZS5kYXRhWzBdOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5KHt0eXBlOiAiZXJyb3IiLCB0ZXh0OiBlcnJvcn0pCiAgICAgICAgfSkKICAgIH0sCiAgICBnZXQ1RGF5V2VhdGhlckRhdGEoKXsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KCJodHRwOi8vZGF0YXNlcnZpY2UuYWNjdXdlYXRoZXIuY29tL2ZvcmVjYXN0cy92MS9kYWlseS81ZGF5LyIgKyB0aGlzLmxvY2F0aW9uLmxvY2F0aW9uS2V5ICsgIj9hcGlrZXk9IiArIHRoaXMuYXBpLmFwaUtleSArICImbGFuZ3VhZ2U9IiArIHRoaXMuYXBpLmxhbmcgKyAiJmRldGFpbHM9ZmFsc2UmbWV0cmljPXRydWUiKQogICAgICAgIC50aGVuKChSZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy53ZWF0aGVyLmZpdmVEYXlEYXRhID0gUmVzcG9uc2UuZGF0YTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7dHlwZTogImVycm9yIiwgdGV4dDogZXJyb3J9KQogICAgICAgIH0pCiAgICB9LAogICAgY2hlY2tMb2NhdGlvbigpewogICAgICBpZih0aGlzLndlYXRoZXIuaG91ckRhdGEgIT0gbnVsbCAmJiB0aGlzLndlYXRoZXIuaG91ckRhdGEuTGluay5zZWFyY2godGhpcy5sb2NhdGlvbi5sb2NhdGlvbktleSkgPT0gLTEpewogICAgICAgIHRoaXMud2VhdGhlci5ob3VyRGF0YSA9IG51bGw7CiAgICAgICAgdGhpcy53ZWF0aGVyLmZpdmVEYXlEYXRhID0gbnVsbDsKICAgICAgICB0aGlzLmdldFdlYXRoZXJEYXRhKCk7CiAgICAgICAgdGhpcy5nZXQ1RGF5V2VhdGhlckRhdGEoKTsKICAgICAgfWVsc2V7CiAgICAgICAgdGhpcy5nZXRXZWF0aGVyRGF0YSgpOwogICAgICAgIHRoaXMuZ2V0NURheVdlYXRoZXJEYXRhKCk7CiAgICAgIH0KICAgIH0sCiAgICBzdWNjZXNzKHBvc2l0aW9uKXsKICAgICAgdGhpcy5sb2NhdGlvbi5sYXRpdHVkZSA9IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZTsKICAgICAgdGhpcy5sb2NhdGlvbi5sb25naXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlOwogICAgICB0aGlzLmdldE1lcmlkaWFuTG9jYXRpb24oKTsKICAgIH0sCiAgICBlcnJvcigpewogICAgICB0aGlzLiRub3RpZnkoe3R5cGU6ICJlcnJvciIsIHRleHQ6ICJDb3VsZCBub3QgZ2V0IGxvY2F0aW9uIn0pCiAgICAgICF0aGlzLmxvY2F0aW9uLmxvY2F0aW9uS2V5ICYmICF0aGlzLmxvY2F0aW9uLmxvY2F0aW9uTmFtZSA/IHRoaXMuZ2V0SXBBZGRyZXNzKHRydWUpIDogdGhpcy5jaGVja0xvY2F0aW9uKCk7CiAgICB9CiAgfQp9Cgo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n   <div  class=\"container\" style=\"max-width: 400px; min-width: 360px\">\n     \n    <section >\n\n      <Header page=\"Home\" :location=\" location.locationName \" />\n        <div v-if=\"weather.hourData && weather.fiveDayData\" class=\"content  centerpage card rounded my-3 shadow-lg back-card overflow-hidden\" id=\"content\">\n          <div class=\"temperature-holder \" style=\"margin: 10px 50px 20px;\">\n            <span class=\"value\">{{ weather.hourData.Temperature.Value }}°C</span>\n            <span class=\"phrase text-white\">{{ weather.hourData.IconPhrase }}</span>\n            <fav/>\n            <div id=\"components-demo\">\n              <button-counter></button-counter>\n            </div>\n            <!-- <div>\n                <p class=\"jumbotron\"> \n\n                  <button v-on:click=\"favori()\" variant=\"danger\"> Ajouter aux favoris</button>\n                </p>\n            </div> -->\n\n          </div>\n          <div class=\"days back-card bg-dark text-white\" style=\"margin: 200px 100px 20px;\">\n            <span class=\"day back-card bg-dark text-white\" v-for=\"(day, index) in weather.fiveDayData.DailyForecasts\" :key=\"index\" >\n              <span class=\"temperature-value\">{{ day.Temperature.Maximum.Value }}°C</span>\n              <span class=\"day-date  text-white\">{{ new Date( day.EpochDate*1000).toLocaleString(\"fr-EU\", {day: '2-digit', year: '2-digit', month: '2-digit'}) }}</span>\n            </span>\n          </div>\n        </div>\n      <Loading v-else />\n      <Footer />\n  </section>\n</div>\n</template>\n\n<script>\nimport Fav from \"../components/Favoris\"\nimport Header from \"../components/Header\"\nimport Footer from \"../components/Footer\"\nimport Loading from \"../components/Loading\"\nimport store from \"../store\"\nimport axios from \"axios\"\nimport Vue from 'vue'\n\nnew Vue({ el: '#components-demo' })\n\nexport default{\n  components: {Header, Footer, Loading, fav},\n  computed: {\n    location () {\n      return store.state.location\n    },\n    user () {\n      return store.state.user\n    },\n    api () {\n      return store.state.api\n    },\n    weather () {\n      return store.state.weather\n    }\n  },\n  mounted(){\n    if(!this.location.search){\n      if(!navigator.geolocation){\n        if(!this.location.locationKey && !this.location.locationName){\n          this.getIpAddress(true);\n        }else{\n          this.checkLocation();\n        }\n      }else{\n        navigator.geolocation.getCurrentPosition(this.success, this.error)\n      }\n    }else{\n      this.location.search = false;\n      this.checkLocation();\n    }\n  },\n  data() {\n     return{\n      // fav : [],\n      // ville: this.location.locationName\n     }\n  },\n  methods: {\n    favori: function() {\n\n      fav = [],\n      this.fav.push('ypoussss');\n      console.log(fav)\n    },\n    // favori: function(ville){\n    //   this.fav.push(ville);\n    //   console.log(fav);\n    // },\n    getIpAddress(param = false){\n      axios\n        .get(\"https://api.ipify.org?format=json\")\n        .then((Response) => {\n          this.user.ipAddress = Response.data.ip;\n          if(param){this.getIpLocation()}\n        })\n        .catch((error) => {\n          this.$notify({type: \"error\", text: error})\n        })\n    },\n    getIpLocation(){\n      axios\n        .get(\"http://dataservice.accuweather.com/locations/v1/cities/ipaddress?apikey=\" + this.api.apiKey + \"&q=\" + this.user.ipAddress + \"&language=\" + this.api.lang + \"&details=false\")\n        .then((Response) => {\n          this.location.locationKey = Response.data.ParentCity.Key,\n          this.location.locationName = Response.data.ParentCity.EnglishName\n          this.getWeatherData();\n          this.get5DayWeatherData();\n        })\n        .catch((error) => {\n          this.$notify({type: \"error\", text: error})\n        })\n    },\n    getMeridianLocation(){\n      axios\n        .get(\"http://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=\" + this.api.apiKey + \"&q=\" + this.location.latitude + \",\" + this.location.longitude + \"&language=\" + this.api.lang + \"&details=false&toplevel=false\")\n        .then((Response) => {\n          this.location.locationKey = Response.data.Key,\n          this.location.locationName = Response.data.LocalizedName\n          this.getWeatherData();\n          this.get5DayWeatherData();\n        })\n        .catch((error) => {\n          this.$notify({type: \"error\", text: error})\n        })\n    },\n    getWeatherData(){\n      axios\n        .get(\"https://dataservice.accuweather.com/forecasts/v1/hourly/1hour/\" + this.location.locationKey + \"?apikey=\" + this.api.apiKey + \"&language=\" + this.api.lang + \"&details=false&metric=true\")\n        .then((Response) => {\n          this.weather.hourData = Response.data[0];\n        })\n        .catch((error) => {\n          this.$notify({type: \"error\", text: error})\n        })\n    },\n    get5DayWeatherData(){\n      axios\n        .get(\"http://dataservice.accuweather.com/forecasts/v1/daily/5day/\" + this.location.locationKey + \"?apikey=\" + this.api.apiKey + \"&language=\" + this.api.lang + \"&details=false&metric=true\")\n        .then((Response) => {\n          this.weather.fiveDayData = Response.data;\n        })\n        .catch((error) => {\n          this.$notify({type: \"error\", text: error})\n        })\n    },\n    checkLocation(){\n      if(this.weather.hourData != null && this.weather.hourData.Link.search(this.location.locationKey) == -1){\n        this.weather.hourData = null;\n        this.weather.fiveDayData = null;\n        this.getWeatherData();\n        this.get5DayWeatherData();\n      }else{\n        this.getWeatherData();\n        this.get5DayWeatherData();\n      }\n    },\n    success(position){\n      this.location.latitude = position.coords.latitude;\n      this.location.longitude = position.coords.longitude;\n      this.getMeridianLocation();\n    },\n    error(){\n      this.$notify({type: \"error\", text: \"Could not get location\"})\n      !this.location.locationKey && !this.location.locationName ? this.getIpAddress(true) : this.checkLocation();\n    }\n  }\n}\n\n</script>\n"]}]}