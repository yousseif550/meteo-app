{"remainingRequest":"/Users/yousseifissulahi/Desktop/EFREI/Alternance/Test/weather/NEW_METEO/weather-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yousseifissulahi/Desktop/EFREI/Alternance/Test/weather/NEW_METEO/weather-app/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yousseifissulahi/Desktop/EFREI/Alternance/Test/weather/NEW_METEO/weather-app/src/views/Home.vue","mtime":1629270913881},{"path":"/Users/yousseifissulahi/Desktop/EFREI/Alternance/Test/weather/NEW_METEO/weather-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yousseifissulahi/Desktop/EFREI/Alternance/Test/weather/NEW_METEO/weather-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBGYXYgZnJvbSAiLi4vY29tcG9uZW50cy9GYXZvcmlzLnZ1ZSIKaW1wb3J0IEhlYWRlciBmcm9tICIuLi9jb21wb25lbnRzL0hlYWRlciIKaW1wb3J0IEZvb3RlciBmcm9tICIuLi9jb21wb25lbnRzL0Zvb3RlciIKaW1wb3J0IExvYWRpbmcgZnJvbSAiLi4vY29tcG9uZW50cy9Mb2FkaW5nIgppbXBvcnQgc3RvcmUgZnJvbSAiLi4vc3RvcmUiCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyIKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnCmltcG9ydCB7IEJvb3RzdHJhcFZ1ZSwgSWNvbnNQbHVnaW4gfSBmcm9tICdib290c3RyYXAtdnVlJwoKaW1wb3J0ICdib290c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLmNzcycKaW1wb3J0ICdib290c3RyYXAtdnVlL2Rpc3QvYm9vdHN0cmFwLXZ1ZS5jc3MnCgpleHBvcnQgZGVmYXVsdHsKICBjb21wb25lbnRzOiB7SGVhZGVyLCBGb290ZXIsIExvYWRpbmd9LAogIGNvbXB1dGVkOiB7CiAgICBsb2NhdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5sb2NhdGlvbgogICAgfSwKICAgIHVzZXIgKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUudXNlcgogICAgfSwKICAgIGFwaSAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5hcGkKICAgIH0sCiAgICB3ZWF0aGVyICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLndlYXRoZXIKICAgIH0KICB9LAogIG1vdW50ZWQoKXsKICAgIGlmKCF0aGlzLmxvY2F0aW9uLnNlYXJjaCl7CiAgICAgIGlmKCFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pewogICAgICAgIGlmKCF0aGlzLmxvY2F0aW9uLmxvY2F0aW9uS2V5ICYmICF0aGlzLmxvY2F0aW9uLmxvY2F0aW9uTmFtZSl7CiAgICAgICAgICB0aGlzLmdldElwQWRkcmVzcyh0cnVlKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHRoaXMuY2hlY2tMb2NhdGlvbigpOwogICAgICAgIH0KICAgICAgfWVsc2V7CiAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbih0aGlzLnN1Y2Nlc3MsIHRoaXMuZXJyb3IpCiAgICAgIH0KICAgIH1lbHNlewogICAgICB0aGlzLmxvY2F0aW9uLnNlYXJjaCA9IGZhbHNlOwogICAgICB0aGlzLmNoZWNrTG9jYXRpb24oKTsKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICAgcmV0dXJuewogICAgICAvLyBmYXYgOiBbXSwKICAgICAgLy8gdmlsbGU6IHRoaXMubG9jYXRpb24ubG9jYXRpb25OYW1lCiAgICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZmF2b3JpOiBmdW5jdGlvbigpIHsKCiAgICAgIC8vIGZhdiA9IFtdLAogICAgICB0aGlzLmZhdi5wdXNoKCd5cG91c3NzcycpOwogICAgICBjb25zb2xlLmxvZyhmYXYpCiAgICB9LAogICAgLy8gZmF2b3JpOiBmdW5jdGlvbih2aWxsZSl7CiAgICAvLyAgIHRoaXMuZmF2LnB1c2godmlsbGUpOwogICAgLy8gICBjb25zb2xlLmxvZyhmYXYpOwogICAgLy8gfSwKICAgIGdldElwQWRkcmVzcyhwYXJhbSA9IGZhbHNlKXsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KCJodHRwczovL2FwaS5pcGlmeS5vcmc/Zm9ybWF0PWpzb24iKQogICAgICAgIC50aGVuKChSZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy51c2VyLmlwQWRkcmVzcyA9IFJlc3BvbnNlLmRhdGEuaXA7CiAgICAgICAgICBpZihwYXJhbSl7dGhpcy5nZXRJcExvY2F0aW9uKCl9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoe3R5cGU6ICJlcnJvciIsIHRleHQ6IGVycm9yfSkKICAgICAgICB9KQogICAgfSwKICAgIGdldElwTG9jYXRpb24oKXsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KCJodHRwOi8vZGF0YXNlcnZpY2UuYWNjdXdlYXRoZXIuY29tL2xvY2F0aW9ucy92MS9jaXRpZXMvaXBhZGRyZXNzP2FwaWtleT0iICsgdGhpcy5hcGkuYXBpS2V5ICsgIiZxPSIgKyB0aGlzLnVzZXIuaXBBZGRyZXNzICsgIiZsYW5ndWFnZT0iICsgdGhpcy5hcGkubGFuZyArICImZGV0YWlscz1mYWxzZSIpCiAgICAgICAgLnRoZW4oKFJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmxvY2F0aW9uLmxvY2F0aW9uS2V5ID0gUmVzcG9uc2UuZGF0YS5QYXJlbnRDaXR5LktleSwKICAgICAgICAgIHRoaXMubG9jYXRpb24ubG9jYXRpb25OYW1lID0gUmVzcG9uc2UuZGF0YS5QYXJlbnRDaXR5LkVuZ2xpc2hOYW1lCiAgICAgICAgICB0aGlzLmdldFdlYXRoZXJEYXRhKCk7CiAgICAgICAgICB0aGlzLmdldDVEYXlXZWF0aGVyRGF0YSgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5KHt0eXBlOiAiZXJyb3IiLCB0ZXh0OiBlcnJvcn0pCiAgICAgICAgfSkKICAgIH0sCiAgICBnZXRNZXJpZGlhbkxvY2F0aW9uKCl7CiAgICAgIGF4aW9zCiAgICAgICAgLmdldCgiaHR0cDovL2RhdGFzZXJ2aWNlLmFjY3V3ZWF0aGVyLmNvbS9sb2NhdGlvbnMvdjEvY2l0aWVzL2dlb3Bvc2l0aW9uL3NlYXJjaD9hcGlrZXk9IiArIHRoaXMuYXBpLmFwaUtleSArICImcT0iICsgdGhpcy5sb2NhdGlvbi5sYXRpdHVkZSArICIsIiArIHRoaXMubG9jYXRpb24ubG9uZ2l0dWRlICsgIiZsYW5ndWFnZT0iICsgdGhpcy5hcGkubGFuZyArICImZGV0YWlscz1mYWxzZSZ0b3BsZXZlbD1mYWxzZSIpCiAgICAgICAgLnRoZW4oKFJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmxvY2F0aW9uLmxvY2F0aW9uS2V5ID0gUmVzcG9uc2UuZGF0YS5LZXksCiAgICAgICAgICB0aGlzLmxvY2F0aW9uLmxvY2F0aW9uTmFtZSA9IFJlc3BvbnNlLmRhdGEuTG9jYWxpemVkTmFtZQogICAgICAgICAgdGhpcy5nZXRXZWF0aGVyRGF0YSgpOwogICAgICAgICAgdGhpcy5nZXQ1RGF5V2VhdGhlckRhdGEoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7dHlwZTogImVycm9yIiwgdGV4dDogZXJyb3J9KQogICAgICAgIH0pCiAgICB9LAogICAgZ2V0V2VhdGhlckRhdGEoKXsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KCJodHRwczovL2RhdGFzZXJ2aWNlLmFjY3V3ZWF0aGVyLmNvbS9mb3JlY2FzdHMvdjEvaG91cmx5LzFob3VyLyIgKyB0aGlzLmxvY2F0aW9uLmxvY2F0aW9uS2V5ICsgIj9hcGlrZXk9IiArIHRoaXMuYXBpLmFwaUtleSArICImbGFuZ3VhZ2U9IiArIHRoaXMuYXBpLmxhbmcgKyAiJmRldGFpbHM9ZmFsc2UmbWV0cmljPXRydWUiKQogICAgICAgIC50aGVuKChSZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy53ZWF0aGVyLmhvdXJEYXRhID0gUmVzcG9uc2UuZGF0YVswXTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7dHlwZTogImVycm9yIiwgdGV4dDogZXJyb3J9KQogICAgICAgIH0pCiAgICB9LAogICAgZ2V0NURheVdlYXRoZXJEYXRhKCl7CiAgICAgIGF4aW9zCiAgICAgICAgLmdldCgiaHR0cDovL2RhdGFzZXJ2aWNlLmFjY3V3ZWF0aGVyLmNvbS9mb3JlY2FzdHMvdjEvZGFpbHkvNWRheS8iICsgdGhpcy5sb2NhdGlvbi5sb2NhdGlvbktleSArICI/YXBpa2V5PSIgKyB0aGlzLmFwaS5hcGlLZXkgKyAiJmxhbmd1YWdlPSIgKyB0aGlzLmFwaS5sYW5nICsgIiZkZXRhaWxzPWZhbHNlJm1ldHJpYz10cnVlIikKICAgICAgICAudGhlbigoUmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMud2VhdGhlci5maXZlRGF5RGF0YSA9IFJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoe3R5cGU6ICJlcnJvciIsIHRleHQ6IGVycm9yfSkKICAgICAgICB9KQogICAgfSwKICAgIGNoZWNrTG9jYXRpb24oKXsKICAgICAgaWYodGhpcy53ZWF0aGVyLmhvdXJEYXRhICE9IG51bGwgJiYgdGhpcy53ZWF0aGVyLmhvdXJEYXRhLkxpbmsuc2VhcmNoKHRoaXMubG9jYXRpb24ubG9jYXRpb25LZXkpID09IC0xKXsKICAgICAgICB0aGlzLndlYXRoZXIuaG91ckRhdGEgPSBudWxsOwogICAgICAgIHRoaXMud2VhdGhlci5maXZlRGF5RGF0YSA9IG51bGw7CiAgICAgICAgdGhpcy5nZXRXZWF0aGVyRGF0YSgpOwogICAgICAgIHRoaXMuZ2V0NURheVdlYXRoZXJEYXRhKCk7CiAgICAgIH1lbHNlewogICAgICAgIHRoaXMuZ2V0V2VhdGhlckRhdGEoKTsKICAgICAgICB0aGlzLmdldDVEYXlXZWF0aGVyRGF0YSgpOwogICAgICB9CiAgICB9LAogICAgc3VjY2Vzcyhwb3NpdGlvbil7CiAgICAgIHRoaXMubG9jYXRpb24ubGF0aXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7CiAgICAgIHRoaXMubG9jYXRpb24ubG9uZ2l0dWRlID0gcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZTsKICAgICAgdGhpcy5nZXRNZXJpZGlhbkxvY2F0aW9uKCk7CiAgICB9LAogICAgZXJyb3IoKXsKICAgICAgdGhpcy4kbm90aWZ5KHt0eXBlOiAiZXJyb3IiLCB0ZXh0OiAiQ291bGQgbm90IGdldCBsb2NhdGlvbiJ9KQogICAgICAhdGhpcy5sb2NhdGlvbi5sb2NhdGlvbktleSAmJiAhdGhpcy5sb2NhdGlvbi5sb2NhdGlvbk5hbWUgPyB0aGlzLmdldElwQWRkcmVzcyh0cnVlKSA6IHRoaXMuY2hlY2tMb2NhdGlvbigpOwogICAgfQogIH0KfQoK"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n   <div  class=\"container\" style=\"max-width: 400px; min-width: 360px\">\n     \n    <section >\n\n      <Header page=\"Home\" :location=\" location.locationName \" />\n        <div v-if=\"weather.hourData && weather.fiveDayData\" class=\"content  centerpage meteo rounded my-3 shadow-lg  overflow-hidden\" id=\"content\">\n          <div class=\"temperature-holder \" style=\"margin: 10px 50px 20px;\">\n            <span class=\"value  text-white\">{{ weather.hourData.Temperature.Value }}°C</span>\n            <span class=\"phrase text-white\">{{ weather.hourData.IconPhrase }}</span><br/>\n            <router-link to=\"/favoris\">\n            <div>\n                  <button class=\" back-card meteo text-white\" style=\"height: 40px; width: 150px; \" v-on:click=\"favori()\">Ajouter aux favoris</button>\n                \n            </div>\n          </router-link>\n            \n\n          </div>\n          <div class=\"days  meteo text-white\" style=\"margin: 200px 100px 20px;\">\n            <span class=\"day back-card meteo text-white\" v-for=\"(day, index) in weather.fiveDayData.DailyForecasts\" :key=\"index\" >\n              <span class=\"temperature-value\">{{ day.Temperature.Maximum.Value }}°C</span>\n              <span class=\"day-date  text-white\">{{ new Date( day.EpochDate*1000).toLocaleString(\"fr-EU\", {day: '2-digit', year: '2-digit', month: '2-digit'}) }}</span>\n            </span>\n          </div>\n        </div>\n      <Loading v-else />\n      <Footer />\n  </section>\n</div>\n</template>\n\n<script>\n// import Fav from \"../components/Favoris.vue\"\nimport Header from \"../components/Header\"\nimport Footer from \"../components/Footer\"\nimport Loading from \"../components/Loading\"\nimport store from \"../store\"\nimport axios from \"axios\"\nimport Vue from 'vue'\nimport { BootstrapVue, IconsPlugin } from 'bootstrap-vue'\n\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\n\nexport default{\n  components: {Header, Footer, Loading},\n  computed: {\n    location () {\n      return store.state.location\n    },\n    user () {\n      return store.state.user\n    },\n    api () {\n      return store.state.api\n    },\n    weather () {\n      return store.state.weather\n    }\n  },\n  mounted(){\n    if(!this.location.search){\n      if(!navigator.geolocation){\n        if(!this.location.locationKey && !this.location.locationName){\n          this.getIpAddress(true);\n        }else{\n          this.checkLocation();\n        }\n      }else{\n        navigator.geolocation.getCurrentPosition(this.success, this.error)\n      }\n    }else{\n      this.location.search = false;\n      this.checkLocation();\n    }\n  },\n  data() {\n     return{\n      // fav : [],\n      // ville: this.location.locationName\n     }\n  },\n  methods: {\n    favori: function() {\n\n      // fav = [],\n      this.fav.push('ypoussss');\n      console.log(fav)\n    },\n    // favori: function(ville){\n    //   this.fav.push(ville);\n    //   console.log(fav);\n    // },\n    getIpAddress(param = false){\n      axios\n        .get(\"https://api.ipify.org?format=json\")\n        .then((Response) => {\n          this.user.ipAddress = Response.data.ip;\n          if(param){this.getIpLocation()}\n        })\n        .catch((error) => {\n          this.$notify({type: \"error\", text: error})\n        })\n    },\n    getIpLocation(){\n      axios\n        .get(\"http://dataservice.accuweather.com/locations/v1/cities/ipaddress?apikey=\" + this.api.apiKey + \"&q=\" + this.user.ipAddress + \"&language=\" + this.api.lang + \"&details=false\")\n        .then((Response) => {\n          this.location.locationKey = Response.data.ParentCity.Key,\n          this.location.locationName = Response.data.ParentCity.EnglishName\n          this.getWeatherData();\n          this.get5DayWeatherData();\n        })\n        .catch((error) => {\n          this.$notify({type: \"error\", text: error})\n        })\n    },\n    getMeridianLocation(){\n      axios\n        .get(\"http://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=\" + this.api.apiKey + \"&q=\" + this.location.latitude + \",\" + this.location.longitude + \"&language=\" + this.api.lang + \"&details=false&toplevel=false\")\n        .then((Response) => {\n          this.location.locationKey = Response.data.Key,\n          this.location.locationName = Response.data.LocalizedName\n          this.getWeatherData();\n          this.get5DayWeatherData();\n        })\n        .catch((error) => {\n          this.$notify({type: \"error\", text: error})\n        })\n    },\n    getWeatherData(){\n      axios\n        .get(\"https://dataservice.accuweather.com/forecasts/v1/hourly/1hour/\" + this.location.locationKey + \"?apikey=\" + this.api.apiKey + \"&language=\" + this.api.lang + \"&details=false&metric=true\")\n        .then((Response) => {\n          this.weather.hourData = Response.data[0];\n        })\n        .catch((error) => {\n          this.$notify({type: \"error\", text: error})\n        })\n    },\n    get5DayWeatherData(){\n      axios\n        .get(\"http://dataservice.accuweather.com/forecasts/v1/daily/5day/\" + this.location.locationKey + \"?apikey=\" + this.api.apiKey + \"&language=\" + this.api.lang + \"&details=false&metric=true\")\n        .then((Response) => {\n          this.weather.fiveDayData = Response.data;\n        })\n        .catch((error) => {\n          this.$notify({type: \"error\", text: error})\n        })\n    },\n    checkLocation(){\n      if(this.weather.hourData != null && this.weather.hourData.Link.search(this.location.locationKey) == -1){\n        this.weather.hourData = null;\n        this.weather.fiveDayData = null;\n        this.getWeatherData();\n        this.get5DayWeatherData();\n      }else{\n        this.getWeatherData();\n        this.get5DayWeatherData();\n      }\n    },\n    success(position){\n      this.location.latitude = position.coords.latitude;\n      this.location.longitude = position.coords.longitude;\n      this.getMeridianLocation();\n    },\n    error(){\n      this.$notify({type: \"error\", text: \"Could not get location\"})\n      !this.location.locationKey && !this.location.locationName ? this.getIpAddress(true) : this.checkLocation();\n    }\n  }\n}\n\n</script>\n"]}]}